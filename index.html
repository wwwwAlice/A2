<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bushfire Threatens Australians</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: 'Pluto';
      src: url('pluto.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-gap: 20px;
      margin-top: 20px;
    }
    .intro {
      margin-top: 100px;
      margin-bottom: 20px;
    }
    .header-image {
      height: 50vh;  /* Set the height to 50% of the viewport height */
      width: 100%;   /* Full width */
      object-fit: cover;  /* Ensure the image covers the container without distortion */
      position: relative;
    }
    h1 {
      font-family: 'Arial', sans-serif;
      font-size: 48px;  /* Increase font size */
      font-weight: bold; /* Make it bold */
      color: Red;  /* Make the text white for contrast */
      text-align: center;  /* Center the text horizontally */
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);  /* Add subtle shadow for better readability */
      position: absolute;  /* Position the title over the image */
      top: 50%;  /* Center vertically */
      left: 50%; /* Center horizontally */
      transform: translate(-50%, -50%);  /* Adjust the position exactly in the center */
      margin-top:50px;
      margin-bottom:50px;
    }
  </style>
</head>
<body>

  <!-- Header Image -->
  <img src="image.jpg" alt="Bushfire Image" class="header-image">

  <h1>Extreme Weather Threatens Australians</h1>

  <!-- Introduction Section -->
  <div class="intro">
    <p><strong>Bushfires in Australia</strong> are a widespread and regular occurrence that have contributed significantly to shaping the nature of the continent over millions of years. Eastern Australia is one of the most fire-prone regions of the world, and its predominant eucalyptus forests have evolved to thrive on the phenomenon of bushfire. However, the fires can cause significant property damage and loss of both human and animal life. Bushfires have killed approximately 800 people in Australia since 1851, and billions of animals.</p>
  </div>

  <!-- Container for the 4 charts in 2x2 grid -->
  <div class="container">
    <!-- Bushfire Cases vs Deaths and Injuries by Australian States -->
    <div id="bushfire_area"></div>

    <!-- Deaths and Injuries by State and Extreme Weather Conditions -->
    <div id="extreme_weather"></div>

    <!-- Bushfire Safer Place South Australia with 6 Key Cities -->
    <div id="bushfire_safer_place"></div>

    <!-- Extreme Weather-Related Injury Hospitalisations -->
    <div id="weather_injuries"></div>
  </div>

  <!-- Bushfire Cases Visualization Script -->
  <script type="text/javascript">
  var bushfireAreaSpec = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 450,
    "height": 300,
    "title": {
      "text": "Bushfire Area vs Deaths and Injuries by Australian States",
      "fontSize": 16
    },
    "data": {
      "values": [
        {"state": "VIC", "bushfire_area": 1583, "deaths_injuries": 39},
        {"state": "NSW", "bushfire_area": 5682, "deaths_injuries": 91},
        {"state": "SA", "bushfire_area": 313, "deaths_injuries": 40},
        {"state": "WA", "bushfire_area": 2044, "deaths_injuries": 42},
        {"state": "NT", "bushfire_area": 14, "deaths_injuries": 14},
        {"state": "ACT", "bushfire_area": 90, "deaths_injuries": 3},
        {"state": "TAS", "bushfire_area": 45, "deaths_injuries": 7},
        {"state": "QLD", "bushfire_area": 574, "deaths_injuries": 42}
      ]
    },
    "params": [
      {
        "name": "bushfire_area_slider",
        "value": 10000,
        "bind": {
          "input": "range",
          "min": 200,
          "max": 10000,
          "step": 100,
          "name": "Filter by Bushfire Area ('000 hectares)"
        }
      },
      {
        "name": "deaths_injuries_slider",
        "value": 100,
        "bind": {
          "input": "range",
          "min": 0,
          "max": 100,
          "step": 1,
          "name": "Filter by Deaths and Injuries"
        }
      }
    ],
    "layer": [
      {
        "mark": "circle",  // Bubbles
        "encoding": {
          "x": {
            "field": "deaths_injuries",
            "type": "quantitative",
            "title": "Deaths and Injuries"
          },
          "y": {
            "field": "bushfire_area",
            "type": "quantitative",
            "title": "Bushfire Area ('000 hectares)"
          },
          "size": {
            "field": "bushfire_area",
            "type": "quantitative",
            "title": "Bubble Size (Bushfire Area)",
            "scale": {"range": [0, 3000]}  // Increased bubble size
          },
          "color": {
            "field": "state",
            "type": "nominal",
            "title": "State"
          },
          "tooltip": [
            {"field": "state", "type": "nominal", "title": "State"},
            {"field": "bushfire_area", "type": "quantitative", "title": "Bushfire Area ('000 hectares)"},
            {"field": "deaths_injuries", "type": "quantitative", "title": "Deaths and Injuries"}
          ]
        }
      },
      {
        "mark": {
          "type": "text",  // Adding data points (text on bubbles)
          "align": "center",
          "baseline": "middle",
          "dx": 0,
          "dy": 0
        },
        "encoding": {
          "x": {
            "field": "deaths_injuries",
            "type": "quantitative"
          },
          "y": {
            "field": "bushfire_area",
            "type": "quantitative"
          },
          "text": {
            "field": "bushfire_area",  // Displaying bushfire area inside the bubbles
            "type": "quantitative"
          },
          "color": {
            "value": "black"  // Text color for the data points
          }
        }
      }
    ]
  };

  vegaEmbed('#bushfire_area', bushfireAreaSpec).then(function(result) {
    console.log(result);
  }).catch(console.error);
</script>


  <!-- Extreme Weather Visualization Script -->
  <script type="text/javascript">
    var extremeWeatherSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 450,
      "height": 300,
      "title": {
        "text": "Deaths and Injuries by State and Extreme Weather Conditions",
        "fontSize": 16
      },
      "data": {
        "values": [
          {"state": "VIC", "weather": "Heat", "deaths_injuries": 410},
          {"state": "VIC", "weather": "Cold", "deaths_injuries": 51},
          {"state": "VIC", "weather": "Bushfire", "deaths_injuries": 39},
          {"state": "VIC", "weather": "Rain", "deaths_injuries": 8},
          {"state": "VIC", "weather": "Storm", "deaths_injuries": 10},
          {"state": "NSW", "weather": "Heat", "deaths_injuries": 348},
          {"state": "NSW", "weather": "Cold", "deaths_injuries": 40},
          {"state": "NSW", "weather": "Bushfire", "deaths_injuries": 91},
          {"state": "NSW", "weather": "Rain", "deaths_injuries": 52},
          {"state": "NSW", "weather": "Storm", "deaths_injuries": 49},
          {"state": "SA", "weather": "Heat", "deaths_injuries": 266},
          {"state": "SA", "weather": "Cold", "deaths_injuries": 23},
          {"state": "SA", "weather": "Bushfire", "deaths_injuries": 40},
          {"state": "SA", "weather": "Rain", "deaths_injuries": 4},
          {"state": "SA", "weather": "Storm", "deaths_injuries": 10},
          {"state": "WA", "weather": "Heat", "deaths_injuries": 267},
          {"state": "WA", "weather": "Cold", "deaths_injuries": 21},
          {"state": "WA", "weather": "Bushfire", "deaths_injuries": 42},
          {"state": "WA", "weather": "Rain", "deaths_injuries": 8},
          {"state": "WA", "weather": "Storm", "deaths_injuries": 16},
          {"state": "NT", "weather": "Heat", "deaths_injuries": 73},
          {"state": "NT", "weather": "Cold", "deaths_injuries": 5},
          {"state": "NT", "weather": "Bushfire", "deaths_injuries": 14},
          {"state": "NT", "weather": "Rain", "deaths_injuries": 3},
          {"state": "NT", "weather": "Storm", "deaths_injuries": 8},
          {"state": "ACT", "weather": "Heat", "deaths_injuries": 23},
          {"state": "ACT", "weather": "Cold", "deaths_injuries": 14},
          {"state": "ACT", "weather": "Bushfire", "deaths_injuries": 3},
          {"state": "ACT", "weather": "Rain", "deaths_injuries": 1},
          {"state": "ACT", "weather": "Storm", "deaths_injuries": 0},
          {"state": "TAS", "weather": "Heat", "deaths_injuries": 19},
          {"state": "TAS", "weather": "Cold", "deaths_injuries": 22},
          {"state": "TAS", "weather": "Bushfire", "deaths_injuries": 7},
          {"state": "TAS", "weather": "Rain", "deaths_injuries": 3},
          {"state": "TAS", "weather": "Storm", "deaths_injuries": 1},
          {"state": "QLD", "weather": "Heat", "deaths_injuries": 717},
          {"state": "QLD", "weather": "Cold", "deaths_injuries": 25},
          {"state": "QLD", "weather": "Bushfire", "deaths_injuries": 60},
          {"state": "QLD", "weather": "Rain", "deaths_injuries": 28},
          {"state": "QLD", "weather": "Storm", "deaths_injuries": 16}
        ]
      },
      "params": [
        {
          "name": "state_filter",
          "value": "All",
          "bind": {
            "input": "select",
            "options": ["All", "VIC", "NSW", "SA", "WA", "NT", "ACT", "TAS", "QLD"],
            "name": "Filter by State"
          }
        },
        {
          "name": "weather_filter",
          "value": "All",
          "bind": {
            "input": "select",
            "options": ["All", "Heat", "Cold", "Bushfire", "Rain", "Storm"],
            "name": "Filter by Weather Condition"
          }
        }
      ],
      "transform": [
        {
          "filter": "(state_filter === 'All' || datum.state === state_filter) && (weather_filter === 'All' || datum.weather === weather_filter)"
        }
      ],
      "mark": "bar",
      "encoding": {
        "x": {
          "field": "state",
          "type": "nominal",
          "title": "State"
        },
        "y": {
          "field": "deaths_injuries",
          "type": "quantitative",
          "title": "Deaths and Injuries"
        },
        "color": {
          "field": "weather",
          "type": "nominal",
          "title": "Weather Condition",
          "scale": {
            "scheme": "plasma"
          }
        },
        "tooltip": [
          {"field": "state", "type": "nominal", "title": "State"},
          {"field": "weather", "type": "nominal", "title": "Weather Condition"},
          {"field": "deaths_injuries", "type": "quantitative", "title": "Deaths and Injuries"}
        ]
      }
    };

    vegaEmbed('#extreme_weather', extremeWeatherSpec).then(function(result) {
      console.log(result);
    }).catch(console.error);
  </script>

  <!-- Bushfire Safer Place Visualization Script -->
  <script type="text/javascript">
    var bushfireSaferPlaceSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 600,
      "height": 400,
      "title": {
        "fontSize": 16,
        "text": "Bushfire Safer Place South Australia with Key Cities"
      },
      "layer": [
        {
          "data": {
            "url": "https://raw.githubusercontent.com/wwwwAlice/FIT3179week9/refs/heads/main/SAMAP.json", 
            "format": {"type": "topojson", "feature": "australian-states"}
          },
          "mark": {
            "type": "geoshape",
            "fill": "#e0e0e0",
            "stroke": "gray",
            "strokeWidth": 1
          },
          "encoding": {
            "tooltip": [
              {"value": "South Australia", "type": "nominal", "title": "State Name"}
            ]
          }
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/wwwwAlice/FIT3179week9/refs/heads/main/BushfireSaferPlaces_GDA.json", 
            "format": {"type": "topojson", "feature": "BushfireSaferPlaces_GDA2020"}
          },
          "mark": {
            "type": "geoshape",
            "fill": "#e0e0e0",
            "stroke": "red",
            "strokeWidth": 1
          }
        },
        {
          "data": {
            "values": [
               {"city": "Adelaide", "lat": -34.9285, "lon": 138.6007},
              {"city": "Port Augusta", "lat": -32.4911, "lon": 137.7650},
              {"city": "Mount Gambier", "lat": -37.8310, "lon": 140.7790},
              {"city": "Port Lincoln", "lat": -34.7195, "lon": 135.8582},
              {"city": "Whyalla", "lat": -33.0334, "lon": 137.5821},
              {"city": "Coober Pedy", "lat": -29.0124, "lon": 134.7540},
              {"city": "Roxby Downs", "lat": -30.5626, "lon": 136.8957}
            ]
          },
          "mark": "text",
          "encoding": {
            "longitude": {"field": "lon", "type": "quantitative"},
            "latitude": {"field": "lat", "type": "quantitative"},
            "text": {"field": "city", "type": "nominal"},
            "size": {"value": 12},
            "color": {"value": "blue"},
            "tooltip": [{"field": "city", "type": "nominal", "title": "City"}]
          }
        }
      ]
    };


    vegaEmbed('#bushfire_safer_place', bushfireSaferPlaceSpec).then(function(result) {
      console.log(result);
    }).catch(console.error);
  </script>

  <!-- Extreme Weather-Related Injury Hospitalisations Script -->
  <script type="text/javascript">
    var weatherInjuriesSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 450,
      "height": 300,
      "title": {
        "text": "Extreme Weather-Related Injury Hospitalisations (2012 - 2021)",
        "fontSize": 16
      },
      "data": {
        "values": [
          {"year": "2012-13", "heat": 530, "cold": 87, "bushfire": 91, "rain": 25, "storm": 15},
          {"year": "2013-14", "heat": 807, "cold": 91, "bushfire": 99, "rain": 20, "storm": 10},
          {"year": "2014-15", "heat": 566, "cold": 82, "bushfire": 104, "rain": 35, "storm": 20},
          {"year": "2015-16", "heat": 669, "cold": 66, "bushfire": 89, "rain": 18, "storm": 11},
          {"year": "2016-17", "heat": 840, "cold": 104, "bushfire": 66, "rain": 15, "storm": 8},
          {"year": "2017-18", "heat": 710, "cold": 84, "bushfire": 79, "rain": 20, "storm": 13},
          {"year": "2018-19", "heat": 832, "cold": 64, "bushfire": 73, "rain": 21, "storm": 15},
          {"year": "2019-20", "heat": 830, "cold": 73, "bushfire": 174, "rain": 16, "storm": 15},
          {"year": "2020-21", "heat": 741, "cold": 65, "bushfire": 57, "rain": 12, "storm": 9},
          {"year": "2021-22", "heat": 579, "cold": 57, "bushfire": 58, "rain": 40, "storm": 20}
        ]
      },
      "transform": [
        {
          "fold": ["heat", "cold", "bushfire", "rain", "storm"],
          "as": ["weather_condition", "hospitalisations"]
        }
      ],
      "mark": "line",
      "encoding": {
        "x": {
          "field": "year",
          "type": "ordinal",
          "title": "Year"
        },
        "y": {
          "field": "hospitalisations",
          "type": "quantitative",
          "title": "Injury Hospitalisations"
        },
        "color": {
          "field": "weather_condition",
          "type": "nominal",
          "title": "Weather Condition",
          "scale": {
            "scheme": "category10"  // Use a predefined color scheme
          },
          "legend": {"title": "Weather Condition"}
        },
        "tooltip": [
          {"field": "year", "type": "ordinal", "title": "Year"},
          {"field": "hospitalisations", "type": "quantitative", "title": "Injury Hospitalisations"},
          {"field": "weather_condition", "type": "nominal", "title": "Weather Condition"}
        ]
      }
    };

    vegaEmbed('#weather_injuries', weatherInjuriesSpec).then(function(result) {
      console.log(result);
    }).catch(console.error);
  </script>

</body>
</html>
